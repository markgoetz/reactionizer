/*! reactionizer 2016-10-16 */
function DivisionList(a,b,c,d){this.all_teams=d,this.div_count=c,this.conf_count=b,this.div_string=a.string,this.div_names=a.names;var e,f=function(){e=[];for(var a=0,b=0;b<this.conf_count;b++){e.push([]);for(var c=0;c<this.div_count/this.conf_count;c++){var d=new Array;d.name=this.div_names[a],e[b].push(d),a++}}for(var f=0;f<this.all_teams.length;f++){var g=this.div_string[f]-1,h=this.div_count/this.conf_count,i=Math.floor(g/h),j=g%h;e[i][j].push(this.all_teams[f])}};f.bind(this)(),this.toArray=function(){return e},this.moveTeam=function(a,b){0>a||a>d.length||0>b||b>c||(this.div_string[a]=b,f())}}function initMap(){global_polygons=new Array,global_markers=new Array;var a=new google.maps.LatLng(41,-96),b={zoom:4,center:a,maxZoom:6,minZoom:3,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map"),b);for(var c=0;c<global_teams.length;c++){var d=global_teams[c],e=new google.maps.LatLng(d.lat,d.lon);global_markers[c]=new google.maps.Marker({position:e,title:d.city+" "+d.name,icon:getLogoURL(d)}),global_markers[c].setMap(map)}initPolygons()}function resetPolygons(){for(var a=0;a<global_polygons.length;a++)for(var b=0;b<global_polygons[a].length;b++)global_conference_count>a&&global_division_count/global_conference_count>b?global_polygons[a][b].setMap(map):global_polygons[a][b].setMap(null)}function initPolygons(){for(var a=0;a<conference_colors.length;a++){for(var b=new Array,c=conference_colors[a],d=0;d<c.length;d++){var e=new google.maps.Polygon({strokeColor:conference_colors[a][d],strokeWeight:3,fillColor:conference_colors[a][d],fillOpacity:0});e.setMap(map),b.push(e)}global_polygons.push(b)}}function moveTeamMarker(a,b,c){global_markers[a].setPosition(new google.maps.LatLng(b,c)),global_markers[a].setAnimation(google.maps.Animation.DROP)}function initialize(a,b,c){processBookmark(),ReactDOM.render(React.createElement(Divisionizer,{initConferences:b,initDivisions:c,dataurl:"data/data.json"}),document.getElementById(a))}function processBookmark(){if(location.hash){var a=location.hash.substring(1).split(":");global_conference_count=a[0],global_division_count=a[1];for(var b=3;b<a.length;b++){var c=a[b],d=c.split("^");changeTeamCity(d[0],d[1])}}}function setBookmark(a){a=global_conference_count+":"+global_division_count+":"+a;for(var b=0;b<global_teams.length;b++)global_relocated_teams[b]&&(a+=":"+b+"^"+global_relocated_teams[b]);location.hash="#"+a,$("#fb_share").attr("href","http://www.facebook.com/sharer/sharer.php?u=http://www.divisionizer.com/%23"+a),$("#tw_share").attr("href","http://www.twitter.com/home?status=http://www.divisionizer.com/%23"+a)}function getLogoURL(a){return"logos/"+a.name.toLowerCase().replace(" ","")+".png"}function stop_divisionize(){$(".conf_button").removeClass("disabled").removeAttr("disabled"),$(".div_button").addClass("disabled").attr("disabled","disabled"),$(".div_button").removeClass("disabled").removeAttr("disabled"),3==global_conference_count?($("#division_count_selector_4").addClass("disabled").attr("disabled","disabled"),$("#division_count_selector_2").addClass("disabled").attr("disabled","disabled")):2==global_conference_count&&$("#division_count_selector_3").addClass("disabled").attr("disabled","disabled"),$("#divisionizer_on").hide(),$("#divisionizer_off").show(),continuing_flag=!1}var DivisionList,SettingsMenu,Map,LeagueDisplay,Header=React.createClass({displayName:"Header",render:function(){return React.createElement("header",null,"header")}}),Footer=React.createClass({displayName:"Footer",render:function(){return React.createElement("footer",null,"footer")}}),Divisionizer=React.createClass({displayName:"Divisionizer",propTypes:{initConferences:React.PropTypes.number,initDivisions:React.PropTypes.number,dataurl:React.PropTypes.string},componentDidMount:function(){$(document).ajaxError(function(a,b,c,d){alert(d)}),$.ajax({url:this.props.dataurl,context:this,dataType:"json"}).done(function(a){this.setState({teams:a.teams,cities:a.cities,defaultdivs:a.defaultdivs,league:this._getLeague(this.state.conference_count,this.state.division_count,a.defaultdivs,a.teams),max_id:a.teams.length+1})})},getInitialState:function(){return{conference_count:this.props.initConferences,division_count:this.props.initDivisions,teams:[],cities:[],defaultdivs:[],league:[],max_id:0}},onRelocateTeam:function(a,b){var c=this.state.teams,d=c[a],e=this.state.cities[b];d.cityname=e.name,d.lat=e.lat,d.lon=e.lon,this.setState({teams:c,league:this._getLeague(this.state.conference_count,this.state.division_count,this.state.default_divs,c)}),this._getDivisions()},onAddTeam:function(a,b){var c=this.state.cities[b],d={id:this.state.max_id++,name:a,city:c.name,lat:c.lat,lon:c.lon},e=this.state.teams;e.push(d),this.setState({league:this._getLeague(this.state.conference_count,this.state.division_count,this.state.default_divs,e),teams:e})},onConferenceChange:function(a,b){this.setState({conference_count:a,division_count:b,league:this._getLeague(a,b,this.state.defaultdivs,this.state.teams)})},_getLeague:function(a,b,c,d){var e=c[a+":"+b];if(e){var f=new DivisionList(e,a,b,d);return f.toArray()}return[]},render:function(){return React.createElement("div",{id:"divisionizer"},React.createElement(Header,null),React.createElement("div",{className:"application"},React.createElement(SettingsMenu,{conferences:this.state.conference_count,divisions:this.state.division_count,teams:this.state.teams,cities:this.state.cities,onRelocateTeam:this.onRelocateTeam,onAddTeam:this.onAddTeam,onConferenceChange:this.onConferenceChange}),React.createElement("div",{className:"content"},React.createElement(Map,{league:this.state.league}),React.createElement(LeagueDisplay,{league:this.state.league}))),React.createElement(Footer,null))}}),global_division_count=4,global_conference_count=1,static_teams,global_teams,global_cities,map,global_polygons,global_markers,global_relocated_teams=new Array,conference_colors=new Array(new Array("#1B7EE0","#0F4780","#ADD6FF","#899096","#565A5E","#C8D1DB"),new Array("#F5891D","#944E07","#FFD6AD"),new Array("#7EE01B","#386907"));String.prototype.swapChars=function(a,b){if(a>b){var c=a;a=b,b=c}var d=this.charAt(a),e=this.charAt(b),f=this.substring(0,a),g=this.substring(a+1,b),h=this.substring(b+1,this.length);return f+e+g+d+h},String.prototype.setCharAt=function(a,b){return this.substring(0,a)+b+this.substring(a+1,this.length)};var getLogoURL,dragula,LeagueDisplay=React.createClass({displayName:"LeagueDisplay",propTypes:{league:React.PropTypes.array},componentDidUpdate:function(){dragula(Array.prototype.slice.call(document.querySelectorAll(".division .list"))).on("drop",function(a,b){alert(a.className+" "+b.className)})},render:function(){var a=this.props.league.map(function(a,b){return React.createElement(Conference,{conference:a,key:b,number:b,count:this.props.league.length})},this);return React.createElement("div",{id:"league"},a)}}),Conference=React.createClass({displayName:"Conference",propTypes:{conference:React.PropTypes.array,count:React.PropTypes.number,number:React.PropTypes.number},render:function(){var a=this.props.conference.map(function(a,b){return React.createElement(Division,{division:a,key:b,count:this.props.conference.length*this.props.count,conference:this.props.number,number:b})},this),b="conference col-"+this.props.count;return React.createElement("div",{className:b},a)}}),Division=React.createClass({displayName:"Division",propTypes:{division:React.PropTypes.array,count:React.PropTypes.number,conference:React.PropTypes.number,number:React.PropTypes.number},render:function(){var a=this.props.division.map(function(a){return React.createElement(Team,{team:a,key:a.name})}),b="division col-"+this.props.count+" conf-"+this.props.conference+" div-"+this.props.number;return React.createElement("div",{className:b},React.createElement("div",{className:"name"},this.props.division.name),React.createElement("div",{className:"list"},a))}}),Team=React.createClass({displayName:"Team",propTypes:{team:React.PropTypes.object},render:function(){var a=getLogoURL(this.props.team);return React.createElement("div",{className:"team"},React.createElement("img",{className:"team-logo",src:a}),React.createElement("span",{className:"city"},this.props.team.city),React.createElement("span",{className:"name"},"Â ",this.props.team.name))}}),google,getLogoURL,Map=React.createClass({displayName:"Map",render:function(){return React.createElement("div",{id:"map"})},componentDidMount:function(){this.polygons=new Array,this.pins=new Array;var a=new google.maps.LatLng(41,-96),b={zoom:4,center:a,maxZoom:6,minZoom:3,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(document.getElementById("map"),b)},_initPins:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=new google.maps.LatLng(c.lat,c.lon),e=new google.maps.Marker({position:d,title:c.city+" "+c.name,icon:getLogoURL(c)});e.setMap(this.map),this.pins.push(e)}},_initPolygons:function(a){},_updatePins:function(){},_updatePolygons:function(){}}),SettingsMenu=React.createClass({displayName:"SettingsMenu",propTypes:{conferences:React.PropTypes.number,divisions:React.PropTypes.number,teams:React.PropTypes.array,cities:React.PropTypes.array,onConferenceChange:React.PropTypes.func},getInitialState:function(){return{menu_open:!1}},render:function(){var a=this.state.menu_open?"open":"closed",b=this.state.menu_open?"close":"open";return React.createElement("div",{id:"settings_container"},React.createElement("h2",{id:"settings_header"},React.createElement("span",null,"Settings"),React.createElement("button",{onClick:this.toggleMenu},b)),React.createElement("div",{id:"settings_menu",className:a},React.createElement(ConferenceSelector,{conferences:this.props.conferences,divisions:this.props.divisions,onConferenceChange:this.onConferenceChange}),React.createElement(Relocationizer,{teams:this.props.teams,cities:this.props.cities})))},onConferenceChange:function(a,b){this.props.onConferenceChange(a,b)},toggleMenu:function(){this.setState({menu_open:!this.state.menu_open})}}),ConferenceSelector=React.createClass({displayName:"ConferenceSelector",propTypes:{conferences:React.PropTypes.number,divisions:React.PropTypes.number,onConferenceChange:React.PropTypes.func},getInitialState:function(){return{conferences:this.props.conferences,divisions:this.props.divisions}},render:function(){var a=[3,2,1].map(function(a){return React.createElement(SelectorButton,{type:"conference",key:"conference"+a,value:a,selected:a==this.state.conferences,disabled:!1,onButtonClick:this.conferenceUpdate})},this),b=[6,4,3,2].map(function(a){return React.createElement(SelectorButton,{type:"division",key:"division"+a,value:a,selected:a==this.state.divisions,disabled:a%this.state.conferences!=0,onButtonClick:this.divisionUpdate})},this);return React.createElement("div",null,React.createElement("div",{className:"field"},React.createElement("h3",null,"Conferences"),React.createElement("div",{className:"subfield"},React.createElement("div",{className:"selector-container"},a))),React.createElement("div",{className:"field"},React.createElement("h3",null,"Divisions"),React.createElement("div",{className:"subfield"},React.createElement("div",{className:"selector-container"},b))))},conferenceUpdate:function(a){this.setState({conferences:a});var b=this.state.divisions;this.state.divisions%a!=0&&(b=6,this.setState({divisions:b})),this.props.onConferenceChange(a,b)},divisionUpdate:function(a){this.setState({divisions:a}),this.props.onConferenceChange(this.state.conferences,a)}}),SelectorButton=React.createClass({displayName:"SelectorButton",propTypes:{selected:React.PropTypes.bool,disabled:React.PropTypes.bool,type:React.PropTypes.string,value:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.number]),onButtonClick:React.PropTypes.func},render:function(){var a="div_button selector "+(this.props.selected?" selected":"")+(this.props.disabled?" disabled":""),b=this.props.type+"_count_selector_"+this.props.value;return React.createElement("button",{className:a,id:b,disabled:this.props.disabled,onClick:this.handleClick},this.props.value)},handleClick:function(){this.props.onButtonClick(this.props.value)}}),Relocationizer=React.createClass({displayName:"Relocationizer",propTypes:{teams:React.PropTypes.array,cities:React.PropTypes.array},render:function(){var a=this.props.teams.map(function(a){return React.createElement("option",{key:a.name},a.name)}),b=this.props.cities.map(function(a){return React.createElement("option",{key:a.city},a.city)});return React.createElement("div",null,React.createElement("div",{className:"field"},React.createElement("h3",null,"Relocate team"),React.createElement("div",{className:"subfield"},React.createElement("label",null,"team"),React.createElement("select",null,a)),React.createElement("div",{className:"subfield"},React.createElement("label",null,"to"),React.createElement("select",null,b)),React.createElement("div",null,React.createElement("button",{className:"action"},"Relocate Team"))),React.createElement("div",{className:"field"},React.createElement("h3",null,"Expansion team"),React.createElement("div",{className:"subfield"},React.createElement("label",null,"city"),React.createElement("select",null,b)),React.createElement("div",{className:"subfield"},React.createElement("label",null,"name"),React.createElement("input",{type:"text"})),React.createElement("div",null,React.createElement("button",{className:"action"},"Create Team"))))}});